{
  "version": 2,
  "plugin": {
    "pattern": ".so",
    "folder": "./plugins/"
  },
  "extra_config": {
    "github_com/devopsfaith/krakend/transport/http/server/handler": {
      "name": "authPlugin"
   }
  },
  "timeout": "3000ms",
  "cache_ttl": "300s",
  "output_encoding": "json",
  "name": "POC KrakenD Gateway",
  "endpoints": [
    {
      "endpoint": "/concert_content",
      "headers_to_pass": [
        "*"
      ],
      "method": "GET",
      "output_encoding": "json",
      "backend": [
        {
          "url_pattern": "/v1/slots/content",
          "querystring_params": [
            "*"
          ],
          "encoding": "json",
          "sd": "static",
          "method": "GET",
          "extra_config": {},
          "disable_host_sanitize": false,
          "host": [
            "http://concert-service-preprod.us-west-2.remitly.com"
          ]
        }
      ],
      "querystring_params": [
        "customer_id",
        "send_country",
        "receive_country",
        "slots",
        "supported_content"
      ],
      "extra_config": {}
    },
    {
      "endpoint": "/v18/bootstrap",
      "method": "GET",
      "output_encoding": "no-op",
      "extra_config": {},
      "querystring_params": [
        "corridor",
        "override_promo_codes"
      ],
      "headers_to_pass": [
        "X-Forwarded-For",
        "User-Agent",
        "Accept-Language",
        "X-Request-ID",
        "X-Remitly-Device-ID",
        "X-Remitly-Device-UA",
        "X-Remitly-GlobalRiskPublicID",
        "X-Remitly-futuretripping",
        "Remitly-DeviceEnvironmentID",
        "Remitly-Request-Timeout",
        "Remitly-Client-Asn",
        "Remitly-Client-Asn-Compromise-Ratio",
        "Remitly-Client-Asn-Flags",
        "Remitly-Client-Asn-Login-Ratio",
        "Remitly-Client-Credentials",
        "Remitly-Client-Ip-Devices",
        "Remitly-Client-Ip-User-Agents",
        "Remitly-Client-Ip-Users",
        "Remitly-Client-Isp",
        "Remitly-Client-Pfx",
        "Remitly-Client-Pfx-Compromise-Ratio",
        "Remitly-Client-Pfx-Flags",
        "Remitly-Client-Pfx-Login-Ratio",
        "AuthToken",
        "Locale",
        "Remitly-Originating-Ip",
        "auth_role_header",
        "recipient_auth_role"
      ],
      "backend": [
        {
          "url_pattern": "/v18/bootstrap",
          "encoding": "no-op",
          "sd": "static",
          "method": "GET",
          "extra_config": {},
          "host": [
            "https://api.remitly.io/"
          ],
          "disable_host_sanitize": false
        }
      ]
    },
    {
      "endpoint": "/v1/catalog",
      "method": "GET",
      "output_encoding": "no-op",
      "extra_config": {},
      "headers_to_pass": [
        "X-Forwarded-For",
        "User-Agent",
        "Accept-Language",
        "X-Request-ID",
        "X-Remitly-Device-ID",
        "X-Remitly-Device-UA",
        "X-Remitly-GlobalRiskPublicID",
        "X-Remitly-futuretripping",
        "Remitly-DeviceEnvironmentID",
        "Remitly-Request-Timeout",
        "Remitly-Client-Asn",
        "Remitly-Client-Asn-Compromise-Ratio",
        "Remitly-Client-Asn-Flags",
        "Remitly-Client-Asn-Login-Ratio",
        "Remitly-Client-Credentials",
        "Remitly-Client-Ip-Devices",
        "Remitly-Client-Ip-User-Agents",
        "Remitly-Client-Ip-Users",
        "Remitly-Client-Isp",
        "Remitly-Client-Pfx",
        "Remitly-Client-Pfx-Compromise-Ratio",
        "Remitly-Client-Pfx-Flags",
        "Remitly-Client-Pfx-Login-Ratio",
        "AuthToken",
        "Locale",
        "Remitly-Originating-Ip",
        "auth_role_header",
        "recipient_auth_role"
      ],
      "backend": [
        {
          "url_pattern": "/v1/catalog",
          "encoding": "no-op",
          "sd": "static",
          "method": "GET",
          "extra_config": {},
          "host": [
            "https://api.remitly.io/"
          ],
          "disable_host_sanitize": false
        }
      ]
    },
    {
      "endpoint": "/v3/auth/login",
      "method": "POST",
      "output_encoding": "no-op",
      "extra_config": {},
      "headers_to_pass": [
        "*"
      ],
      "backend": [
        {
          "url_pattern": "/v3/auth/login",
          "querystring_params": [
            "*"
          ],
          "encoding": "no-op",
          "sd": "static",
          "method": "POST",
          "extra_config": {},
          "host": [
            "https://api.remitly.io/"
          ],
          "disable_host_sanitize": false
        }
      ]
    }
  ]
}